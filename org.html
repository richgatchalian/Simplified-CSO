<!-- org.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Organization Details</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="org.css" />
</head>
<body>
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-success">
    <div class="container">
      <a class="navbar-brand" href="index.html">‚Üê Back to CSO</a>
    </div>
  </nav>
  
  <div class="container" style="margin-top: 5rem;" id="orgDetailContainer">
    <!-- Content populated by script -->
  </div>

  <script src="info.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const index = urlParams.get('index');

    const container = document.getElementById("orgDetailContainer");

    if (index !== null && organizations[index]) {
      const org = organizations[index];

      container.innerHTML = `
        <div class="text-center mb-4">
          <img src="${org.banner}" alt="${org.name} Banner" class="img-fluid rounded">
        </div>
        <div class="text-center mb-3">
          <img src="${org.logo}" alt="${org.name} Logo" class="img-thumbnail" style="width: 150px;">
          <h2 class="mt-3">${org.name}</h2>
        </div>
        <div class="mb-4">
          <h4>Description</h4>
          <p>${org.description || "No description available."}</p>
        </div>
        <div class="row mb-4">
          <div class="col-md-6">
            <h4>Mission</h4>
            <p>${org.mission || "Not provided."}</p>
          </div>
          <div class="col-md-6">
            <h4>Vision</h4>
            <p>${org.vision || "Not provided."}</p>
          </div>
        </div>
        
        ${org.events && org.events.length > 0 ? `
          <div class="mb-4">
            <h4>Flagship Events</h4>
            <div class="list-group">
              ${org.events.map(event => `
                <div class="list-group-item">
                  <div class="d-flex flex-column flex-md-row mb-4">
                    <img src="${event.image || 'images/flagship_events/DEFAULT.jpg'}" 
                    onerror="this.onerror=null; this.src='images/flagship_events/DEFAULT.jpg';"
                    alt="Event Image" 
                    class="img-fluid mb-3 mb-md-0 me-md-3" 
                    style="max-width: 250px; border-radius: 10px;">
                      <div>
                      <br>
                      <h5 class="mb-3">${event.title}</h5>
                      <small class="text-muted">${event.date}</small>
                      <p class="mb-4">${event.description}</p>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        ` : ''}

        <div>
          <h4 class="text-center fs-3">Contact</h4>
          <p class="text-center">
          ${
            Object.keys(org.contact).length > 0
              ? Object.entries(org.contact)
                  .map(([platform, link]) => {
                    const isEmail = platform.toLowerCase() === "email" || platform.toLowerCase() === "gmail";
                    const href = isEmail ? `mailto:${link}` : link;
                    const icon = {
                      "facebook": "bi-facebook",
                      "instagram": "bi-instagram",
                      "linkedin": "bi-linkedin",
                      "twitter": "bi-twitter",
                      "gmail": "bi-envelope",
                    }[platform.toLowerCase()] || "bi-globe"; 
                    return `
                      <a href="${href}" target="_blank" class="text-decoration-none me-3" style="color: #198754;">
                        <i class="bi ${icon} fs-2" style="color: #198754;"></i> ${platform.charAt(0).toUpperCase() + platform.slice(1)}
                      </a>
                    `;
                  })
                  .join("")
              : "No contact information available."
          }
          </p>
        </div>
      `;
    } else {
      container.innerHTML = `<p class="text-center text-danger">Organization not found.</p>`;
    }
  </script>
</body>
</html>
